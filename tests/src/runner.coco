import sys
import os.path
sys.path.append(os.path.dirname(os.path.abspath(__file__)))

import pytest
pytest.register_assert_rewrite("cocotest")
pytest.register_assert_rewrite("cocotest.main")
pytest.register_assert_rewrite("cocotest.specific")
pytest.register_assert_rewrite("cocotest.suite")
pytest.register_assert_rewrite("cocotest.tutorial")
pytest.register_assert_rewrite("cocotest.util")
pytest.register_assert_rewrite("cocotest.non_strict_test")
pytest.register_assert_rewrite("cocotest.py2_test")
pytest.register_assert_rewrite("cocotest.py3_test")
pytest.register_assert_rewrite("cocotest.py35_test")
pytest.register_assert_rewrite("cocotest.py36_test")
pytest.register_assert_rewrite("cocotest.target_sys_test")

import cocotest
from cocotest.main import run_main


def main():
    print(".", end="", flush=True)  # .
    assert cocotest.__doc__
    run_main(test_easter_eggs="--test-easter-eggs" in sys.argv)
    return True


if __name__ == "__main__":
    main()
